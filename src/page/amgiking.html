<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>암기왕</title>

        <link rel="shortcut icon" href="#">
        <link rel="stylesheet" href="../css/jquery.mobile-1.4.5.css"/>
        <link rel="stylesheet" href="../css/amgiking.css">
        <script src="../js/jquery-1.11.1.min.js"></script>
        <script src="../js/jquery.mobile-1.4.5.js"></script>
        <script src="../js/amgiking_dbHandle.js"></script>
        <script>
           $(document).ready(function() {
               openDB();
               init();
               initVariables();
               createQuestionTable();
               createCategoryTable();
               insertDefaultRowInCategoryTable();

               $('#insert-question').click(function() {
                   let result = insertQuestion();
               });
               $('.to-page-study').click(function() {
                   radioCurrentCategory();
                   getQuestion();
               });
               $('.to-page-add').click(function() {
                   clearInputQuestion();
                   selectCategoryList()
                   
               });
               $('.to-page-list').click(function() {
                   getQuestionList();
               })
               $('.to-page-set-category').click(function() {
                   editCategoryList();
               })
               $('.response-answer').click(function() {
                   addAnswerToDialog();
               });
               $('.response-next').click(function() {
                   nextQuestion();
               });
               $('#shuffle').click(function() {
                   shuffleRemainQuestions();
               });
               $('.delete-databases').click(function() {
                   deleteAllDatabases();
                   createQuestionTable();
               });
               $('.show-category').click(function() {
                   radioCategoryList();
                   
               });
               $('#add-new-category').click(function() {
                   insertNewCategory();
               });
               $('#delete-category').click(function() {
                   selectCurrentCategory();
                   deleteDataInCategory();
                   deleteCategory();
                   selectCategoryList();
               });
               $('.response-right').click(function() {
                   responseRight();
                });
                $('.response-wrong').click(function() {
                    responseWrong();
               });
                $('.header-home').click(function() {
                    printMainPage();
               });
           });
        </script>
    </head>
    <body>
        <div data-role="page" id="page-main" data-theme="b">
            <div data-role="header" data-position="fixed">
                <a href="#page-main" class="header-btn header-home"><img class="header-btn-image" src="../imgs/logo.png"></a>
                <h1></h1>
                <a href="#page-setting" class="header-btn"><img class="header-btn-image" src="../imgs/icon_settings.png"></a>
            </div>
            <div data-role="content">
                <div id="main-image-box" class="main-image-box">
                    <p id="main-img-cover"><img src="../imgs/icon_startStudy.png"></p>
                    <div id="has-question"></div>
                    <a data-role="button" href="#page-select-category" class="show-category no-question-hidden main-btn">공부 시작하기</a>
                    <a data-role="button" href="#page-add" class="to-page-add have-question main-btn"><img src="../imgs/icon_createQuestion_icon.png">문제 만들기</a>
                </div>
                <br>
                <div id="sub-image-box" class="no-question-hidden">
                    <p class="text-big">문제를 직접 만들어보세요!</p>
                    <a data-role="button" href="#page-add" class="to-page-add sub-btn"><span class="sub-btn-img-box"><img src="../imgs/icon_createQuestion_icon.png"></span><p class="text-small">문제부터 정답까지 내 손으로!</p><p class="text-blue">문제 만들기</p><img class="btn-right" src="../imgs/icon-next.png"></a>
                    <a data-role="button" href="#page-list" class="to-page-list sub-btn"><span class="sub-btn-img-box"><img src="../imgs/icon_seeAllQuestions.png"></span><p class="text-small">문제를 수정하고 싶다면?</p><p class="text-blue">전체 질문 보기</p><img class="btn-right" src="../imgs/icon-next.png"></a>
                    <a data-role="button" href="#page-set-category" class="to-page-set-category sub-btn"><span class="sub-btn-img-box"><img src="../imgs/icon_setCategory.png"></span><p class="text-small">카테고리 수정/삭제하기</p><p class="text-blue">카테고리 설정</p><img class="btn-right" src="../imgs/icon-next.png"></a>
                </div>
            </div>
        </div>

        <div data-role="page" id="page-select-category" data-theme="b">
            <div data-role="header" data-position="fixed">
                <a href="#page-main" class="header-btn header-home"><img class="header-btn-image" src="../imgs/logo.png"></a>
                <h1>카테고리 선택</h1>
            </div>
            <div data-role="content">
                <div id="radio-category" data-inset="true">
                </div>
                <a data-role="button" href="#page-study" class="to-page-study">시작하기</a>
            </div>
        </div>
        
        <div data-role="page" id="page-study" data-theme="b">
            <div data-role="header" data-position="fixed">
                <a href="#page-main" class="header-btn header-home"><img class="header-btn-image" src="../imgs/logo.png"></a>
                <h1 id="h1-study"></h1>
                <a href="#" id="shuffle"><img src="../imgs/icon_shuffle.png"></a>
            </div>
            <div data-role="content">
                <ul data-role="listview">
                    <li>
                        <span class="ui-li-aside" id="answer-ratio"></span>
                        <p>질문</p>
                        <p id="study-question"></p>
                        <span class="ui-li-count" id="study-count"></span>
                    </li>
                </ul>
                <br>
                <div data-role="controlgroup" data-type="horizontal">
                    <a data-role="button" href="#dialog-know" class="response-answer">안다</a>
                    <a data-role="button" href="#dialog-donknow" class="response-answer response-wrong">모른다</a>
                </div>
            </div>
        </div>
        
        <div data-role="page" id="page-add" data-theme="b">
            <div data-role="header" data-position="fixed">
                <a href="#page-main" class="header-btn header-home"><img class="header-btn-image" src="../imgs/logo.png"></a>
                <h1>문제 만들기</h1>
            </div>
            <div data-role="content">
                <form onsubmit="return false">
                    <label for="select-add-category">카테고리</label>
                    <select id="select-category-2" class="select-category" data-native-menu="false">
                        
                    </select>
                    <label for="input-question">질문</label>
                    <input id="input-question" type="text" placeholder="질문을 입력해주세요" />
                    <label for="input-answer">정답</label>
                    <input id="input-answer" type="text" placeholder="정답을 입력해주세요" />
                    <div data-role="controlgroup" data-type="horizontal">
                        <button type="button" id="insert-question">만들기</button>
                        <button type="reset">다시 쓰기</button>
                    </div>
                </form>
            </div>
            <div data-role="footer" data-position="fixed">
                
            </div>
        </div>
        
        <div data-role="page" id="page-list" data-theme="b">
            <div data-role="header" data-position="fixed">
                <a href="#page-main" class="header-btn header-home"><img class="header-btn-image" src="../imgs/logo.png"></a>
                <h1>등록된 질문</h1>
            </div>
            
            <div data-role="content" id="list-content">
                <p id="question-count"></p>
                <ul data-role="listview" id="list-ul" data-filter="true" data-filter-placeholder="">
                    
                </ul>
            </div>
            <div data-role="footer" data-position="fixed">
                
            </div>
            
        </div>
        
        <div data-role="page" id="page-setting" data-theme="b">
            <div data-role="header" data-position="fixed">
                <a href="#page-main" class="header-btn header-home"><img class="header-btn-image" src="../imgs/logo.png"></a>
                <h1>설정</h1>
            </div>
            <div data-role="content">
                <ul data-role="listview">
                    <li><a href="#delete-databases-check" data-role="button">데이터 초기화</a></li>
                </ul>
            </div>
        </div>
        
        <div data-role="dialog" id="delete-databases-check" data-theme="b">
            <div data-role="content">
                <p>모든 데이터를 초기화하시겠습니까?</p>
                <a data-role="button" href="#page-setting" class="delete-databases">예</a>
                <a data-role="button" href="#page-setting">아니오</a>
            </div>
        </div>
        
        <div data-role="dialog" id="add-category" data-theme="b">
            <div data-role="content">
                <label for="add-category-name">카테고리 이름</label>
                <input type="text" id="input-category-name" placeholder="카테고리 이름을 입력하세요">
                <a data-role="button" href="#page-set-category" id="add-new-category">추가</a>
                <a data-role="button" href="#page-select-category">취소</a>
            </div>
        </div>
        
        <div data-role="dialog" id="dialog-delete-category" data-theme="b">
            <div data-role="content">
                <p>해당 카테고리를 삭데하시겠습니까?</p>
                <p>카테고리 안의 모든 데이터가 삭제됩니다</p>
                <a data-role="button" href="#page-select-category" id="delete-category">예</a>
                <a data-role="button" href="#page-select-category">아니오</a>
            </div>
        </div>
        
        <div data-role="dialog" id="dialog-know" data-theme="b">
            <div data-role="content">
                <ul class="answer">
                    
                </ul>
                <p>정답을 맞췄습니까?</p>
                <a href="#" data-role="button" class="response-next response-right">맞았다</a>
                <a href="#" data-role="button" class="response-next response-wrong">틀렸다</a>
            </div>
        </div>
        
        <div data-role="dialog" id="dialog-donknow" data-theme="b">
            <div data-role="content">
                <ul class="answer">
                    
                </ul>
                <a href="#" data-role="button" class="response-next">다음</a>
            </div>
        </div>
        
        <div data-role="page" id="page-set-category" data-theme="b">
            <div data-role="header" data-position="fixed">
                <a href="#page-main" class="header-btn header-home"><img class="header-btn-image" src="../imgs/logo.png"></a>
                <h1></h1>
                <a data-role="button" href="#add-category">만들기</a>
            </div>
            <div data-role="content">
                <ul id="category-setting" data-role="listview" data-filter="true" data-filter-placeholder="카테고리 검색" data-inset="true">
                </ul>
                <a data-role="button" href="#dialog-delete-category">카테고리 삭제하기(수정 필요)</a>
            </div>
        </div>

        <div data-role="dialog" id="create-question-done" data-theme="b">
            <div data-role="header" data-position="fixed">
                <a href="#page-main" class="header-btn header-home"><img class="header-btn-image" src="../imgs/logo.png"></a>
                <h1></h1>
            </div>
            <div data-role="content">
                문제가 등록되었습니다.
            </div>
        </div>

        <div data-role="page" id="page-response-done" data-theme="b">
            <div data-role="header" data-position="fixed">
                <a href="#page-main" class="header-btn header-home"><img class="header-btn-image" src="../imgs/logo.png"></a>
                <h1></h1>
            </div>
            <div data-role="content">
                <p>모든 문제를 풀었습니다</p>
            </div>
        </div>
    </body>
    </html>