<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>암기왕</title>

        <link rel="shortcut icon" href="#">
        <link rel="stylesheet" href="../css/jquery.mobile-1.4.5.css"/>
        <script src="../js/jquery-1.11.1.min.js"></script>
        <script src="../js/jquery.mobile-1.4.5.js"></script>
        <script src="../js/amgiking_dbHandle.js"></script>
       <script>
           $(document).ready(function() {
               initVariables();
               openDB();
               createQuestionTable();
               createCategoryTable();
               insertDefaultRowInCategoryTable();

               $('#insert-question').click(function() {
                   let result = insertQuestion();
               });
               $('.to-page-study').click(function() {
                   selectCurrentCategory();
                   getQuestion();
               });
               $('.to-page-add').click(function() {
                   clearInputQuestion();
                   selectCategoryList()
                   
               });
               $('.to-page-list').click(function() {
                   getQuestionList();
               })
               $('.response-answer').click(function() {
                   responseAnswer();
               });
               $('#shuffle').click(function() {
                   shuffleRemainQuestions();
               });
               $('.delete-databases').click(function() {
                   deleteAllDatabases();
                   createQuestionTable();
               });
               $('.show-category').click(function() {
                   selectCategoryList();
                   
               });
               $('#add-new-category').click(function() {
                   insertNewCategory();
               });
               $('#delete-category').click(function() {
                   selectCurrentCategory();
                   deleteDataInCategory();
                   deleteCategory();
                   selectCategoryList();
               });
           });
       </script>
    </head>
    <body>
        <div data-role="page" id="page-main">
            <div data-role="content">
                <p>암기왕</p>
                <a data-role="button" href="#page-category" class="show-category">공부 시작</a>
                <a data-role="button" href="#page-add" class="to-page-add">추가</a>
                <a data-role="button" href="#page-list" class="to-page-list">전체 질문 보기</a>
                <a data-role="button" href="#page-setting">설정</a>
                <a data-role="button" href="#" data-rel="close">끝내기</a>
            </div>
        </div>

        <div data-role="page" id="page-category">
            <div data-role="header" data-position="fixed">
                <a href="#page-main" data-icon="home">Home</a>
                <h1>카테고리 선택</h1>
                <a href="#add-category" data-icon="plus">추가</a>
            </div>
            <div data-role="content">
                <select name="category" id="select-category-1" class="select-category" data-native-menu="false">
                </select>
                <a data-role="button" href="#dialog-delete-category">카테고리 삭제하기</a>
                <a data-role="button" href="#page-study" class="to-page-study">공부 시작</a>
            </div>
        </div>

        <div data-role="page" id="page-study">
            <div data-role="header" data-position="fixed">
                <a href="#page-main" data-icon="home">Home</a>
                <h1>암기 중</h1>
                <a href="#" id="shuffle">섞기</a>
            </div>
            <div data-role="content">
                <ul data-role="listview">
                    <li><p id="study-question"></p><span class="ui-li-count" id="study-count"></span></li>
                    <br><br><br><br><br><br>
                    <li><p id="study-answer"></p></li>
                </ul>
                <br>
                <div data-role="controlgroup" data-type="horizontal">
                    <a data-role="button" href="" class="response-answer" id="answer-know">안다</a>
                    <a data-role="button" href="" class="response-answer" id="answer-don-know">모른다</a>
                </div>
            </div>  
            <div data-role="footer" data-position="fixed">
                <a data-type="button">처음부터</a>
                <a data-type="button">수정하기</a>
                <a data-type="button">삭제하기</a>
            </div>
        </div>

        <div data-role="page" id="page-add">
            <div data-role="header" data-position="fixed">
                <a href="#page-main" data-icon="home">Home</a>
                <h1>문제 만들기</h1>
            </div>
            <div data-role="content">
                <form onsubmit="return false">
                    <label for="select-add-category">카테고리</label>
                    <select id="select-category-2" class="select-category" data-native-menu="false">
                        
                    </select>
                    <label for="input-question">질문</label>
                    <input id="input-question" type="text" placeholder="질문을 입력해주세요" />
                    <label for="input-answer">정답</label>
                    <input id="input-answer" type="text" placeholder="정답을 입력해주세요" />
                    <div data-role="controlgroup" data-type="horizontal">
                        <button type="button" id="insert-question">생성</button>
                        <button type="reset">다시 쓰기</button>
                    </div>
                </form>
            </div>
            <div data-role="footer" data-position="fixed">
                
            </div>
        </div>

        <div data-role="page" id="page-list">
            <div data-role="header" data-position="fixed">
                <a href="#page-main" data-icon="home">Home</a>
                <h1>등록된 질문</h1>
            </div>
            
            <div data-role="content" id="list-content">
                <p id="question-count"></p>
                <ul data-role="listview" id="list-ul" data-filter="true" data-filter-placeholder="">
                    
                </ul>
            </div>
            <div data-role="footer" data-position="fixed">

            </div>

        </div>

        <div data-role="page" id="page-setting">
            <div data-role="header" data-position="fixed">
                <a href="#page-main" data-icon="home">Home</a>
                <h1>설정</h1>
            </div>
            <div data-role="content">
                <ul data-role="listview">
                    <li><a href="#delete-databases-check" data-role="button">데이터 초기화</a></li>
                </ul>
            </div>
        </div>

        <div data-role="dialog" id="delete-databases-check">
            <div data-role="header" data-position="fixed">

            </div>
            <div data-role="content">
                <p>모든 데이터를 초기화하시겠습니까?</p>
                <a data-role="button" href="#page-setting" class="delete-databases">예</a>
                <a data-role="button" href="#page-setting">아니오</a>
            </div>
        </div>

        <div data-role="dialog" id="add-category">
            <div data-role="header" data-position="fixed">

            </div>
            <div data-role="content">
                <label for="add-category-name">카테고리 이름</label>
                <input type="text" id="input-category-name" placeholder="카테고리 이름을 입력하세요">
                <a data-role="button" href="#page-category" id="add-new-category">추가</a>
                <a data-role="button" href="#page-category">취소</a>
            </div>
        </div>

        <div data-role="dialog" id="dialog-delete-category">
            <div data-role="header" data-position="fixed">

            </div>
            <div data-role="content">
                <p>해당 카테고리를 삭데하시겠습니까?</p>
                <p>카테고리 안의 모든 데이터가 삭제됩니다</p>
                <a data-role="button" href="#page-category" id="delete-category">예</a>
                <a data-role="button" href="#page-category">아니오</a>
            </div>
        </div>
        
    </body>
</html>